{"ast":null,"code":"var _jsxFileName = \"D:\\\\Workspace\\\\Project_ReactJS\\\\my-socical\\\\src\\\\components\\\\LikePost\\\\index.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { AiOutlineLike } from \"react-icons/ai\";\nimport { Button } from \"antd\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, db } from \"../../services/firebase\";\nimport { arrayRemove, arrayUnion, doc, updateDoc } from \"firebase/firestore\";\nimport { update } from \"firebase/database\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LikePost(_ref) {\n  _s();\n  let {\n    id,\n    likes\n  } = _ref;\n  const [user] = useAuthState(auth);\n  const likeRef = doc(db, \"Posts\", id);\n  const handleLike = () => {\n    if (likes !== null && likes !== void 0 && likes.includes(user.uid)) {\n      updateDoc(likeRef, {\n        likes: arrayRemove(user.uid)\n      }).then(() => {\n        console.log(\"unlike\");\n      }).catch(e => {\n        console.log(e);\n      });\n    } else {\n      updateDoc(likeRef, {\n        likes: arrayUnion(user.uid)\n      }).then(() => {\n        console.log(\"unlike\");\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Button, {\n    type: \"text\",\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      fontSize: 16,\n      fontWeight: 500,\n      color: \"#606266\",\n      padding: \"0px 30px\"\n    },\n    onClick: handleLike,\n    children: [/*#__PURE__*/_jsxDEV(AiOutlineLike, {\n      style: {\n        marginRight: 5\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), \" Th\\xEDch\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n_s(LikePost, \"hP/7NvzUIXfxIpRVjMlmHSnysKo=\", false, function () {\n  return [useAuthState];\n});\n_c = LikePost;\nexport default LikePost;\nvar _c;\n$RefreshReg$(_c, \"LikePost\");","map":{"version":3,"names":["React","AiOutlineLike","Button","useAuthState","auth","db","arrayRemove","arrayUnion","doc","updateDoc","update","LikePost","id","likes","user","likeRef","handleLike","includes","uid","then","console","log","catch","e","display","alignItems","fontSize","fontWeight","color","padding","marginRight"],"sources":["D:/Workspace/Project_ReactJS/my-socical/src/components/LikePost/index.js"],"sourcesContent":["import React from \"react\";\r\nimport { AiOutlineLike } from \"react-icons/ai\";\r\nimport { Button } from \"antd\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth, db } from \"../../services/firebase\";\r\nimport { arrayRemove, arrayUnion, doc, updateDoc } from \"firebase/firestore\";\r\nimport { update } from \"firebase/database\";\r\n\r\nfunction LikePost({ id, likes }) {\r\n  const [user] = useAuthState(auth);\r\n  const likeRef = doc(db, \"Posts\", id);\r\n\r\n  const handleLike = () => {\r\n    if (likes?.includes(user.uid)) {\r\n      updateDoc(likeRef, {\r\n        likes: arrayRemove(user.uid),\r\n      })\r\n        .then(() => {\r\n          console.log(\"unlike\");\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    } else {\r\n      updateDoc(likeRef, {\r\n        likes: arrayUnion(user.uid),\r\n      })\r\n        .then(() => {\r\n          console.log(\"unlike\");\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      type=\"text\"\r\n      style={{\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        fontSize: 16,\r\n        fontWeight: 500,\r\n        color: \"#606266\",\r\n        padding: \"0px 30px\",\r\n      }}\r\n      onClick={handleLike}\r\n    >\r\n      <AiOutlineLike style={{ marginRight: 5 }} /> Th√≠ch\r\n    </Button>\r\n  );\r\n}\r\n\r\nexport default LikePost;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,QAAQ,gBAAgB;AAC9C,SAASC,MAAM,QAAQ,MAAM;AAC7B,SAASC,YAAY,QAAQ,2BAA2B;AACxD,SAASC,IAAI,EAAEC,EAAE,QAAQ,yBAAyB;AAClD,SAASC,WAAW,EAAEC,UAAU,EAAEC,GAAG,EAAEC,SAAS,QAAQ,oBAAoB;AAC5E,SAASC,MAAM,QAAQ,mBAAmB;AAAC;AAE3C,SAASC,QAAQ,OAAgB;EAAA;EAAA,IAAf;IAAEC,EAAE;IAAEC;EAAM,CAAC;EAC7B,MAAM,CAACC,IAAI,CAAC,GAAGX,YAAY,CAACC,IAAI,CAAC;EACjC,MAAMW,OAAO,GAAGP,GAAG,CAACH,EAAE,EAAE,OAAO,EAAEO,EAAE,CAAC;EAEpC,MAAMI,UAAU,GAAG,MAAM;IACvB,IAAIH,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEI,QAAQ,CAACH,IAAI,CAACI,GAAG,CAAC,EAAE;MAC7BT,SAAS,CAACM,OAAO,EAAE;QACjBF,KAAK,EAAEP,WAAW,CAACQ,IAAI,CAACI,GAAG;MAC7B,CAAC,CAAC,CACCC,IAAI,CAAC,MAAM;QACVC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;MACvB,CAAC,CAAC,CACDC,KAAK,CAAEC,CAAC,IAAK;QACZH,OAAO,CAACC,GAAG,CAACE,CAAC,CAAC;MAChB,CAAC,CAAC;IACN,CAAC,MAAM;MACLd,SAAS,CAACM,OAAO,EAAE;QACjBF,KAAK,EAAEN,UAAU,CAACO,IAAI,CAACI,GAAG;MAC5B,CAAC,CAAC,CACCC,IAAI,CAAC,MAAM;QACVC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;MACvB,CAAC,CAAC,CACDC,KAAK,CAAEC,CAAC,IAAK;QACZH,OAAO,CAACC,GAAG,CAACE,CAAC,CAAC;MAChB,CAAC,CAAC;IACN;EACF,CAAC;EAED,oBACE,QAAC,MAAM;IACL,IAAI,EAAC,MAAM;IACX,KAAK,EAAE;MACLC,OAAO,EAAE,MAAM;MACfC,UAAU,EAAE,QAAQ;MACpBC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE,GAAG;MACfC,KAAK,EAAE,SAAS;MAChBC,OAAO,EAAE;IACX,CAAE;IACF,OAAO,EAAEb,UAAW;IAAA,wBAEpB,QAAC,aAAa;MAAC,KAAK,EAAE;QAAEc,WAAW,EAAE;MAAE;IAAE;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA;IAAA;IAAA;IAAA;EAAA,QACrC;AAEb;AAAC,GA5CQnB,QAAQ;EAAA,QACAR,YAAY;AAAA;AAAA,KADpBQ,QAAQ;AA8CjB,eAAeA,QAAQ;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}